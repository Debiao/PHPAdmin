<?php /*a:2:{s:66:"/Users/sundebiao/PHPAdmin/application/wechat/view/index/index.html";i:1566462145;s:58:"/Users/sundebiao/PHPAdmin/application/admin/view/main.html";i:1564341490;}*/ ?>
<div class="layui-card layui-bg-gray"><?php if(!(empty($title) || (($title instanceof \think\Collection || $title instanceof \think\Paginator ) && $title->isEmpty()))): ?><div class="layui-card-header layui-anim layui-anim-fadein notselect"><span class="layui-icon layui-icon-next font-s10 color-desc margin-right-5"></span><?php echo htmlentities((isset($title) && ($title !== '')?$title:'')); ?><div class="pull-right"></div></div><?php endif; ?><div class="layui-card-body layui-anim layui-anim-upbit"><form onsubmit="return false;" data-auto="true" method="post" action="<?php echo url('save'); ?>" class='layui-form layui-card' autocomplete="off" lay-filter="index"><div class="layui-card-body"><!--        <div class="layui-form-item layui-inline">--><!--            <label class="layui-form-label">版本号</label>--><!--            <div class="layui-input-inline">--><!--                <select class="layui-select" name="version">--><!--                    <?php foreach(['0'=>'bdcf','1'=>'500out'] as $k=>$v): ?>--><!--                    <?php if(app('request')->get('status') == $k.""): ?>--><!--                    <option selected value="<?php echo htmlentities($k); ?>"><?php echo htmlentities($v); ?></option>--><!--                    <?php else: ?>--><!--                    <option value="<?php echo htmlentities($k); ?>"><?php echo htmlentities($v); ?></option>--><!--                    <?php endif; ?>--><!--                    <?php endforeach; ?>--><!--                </select>--><!--            </div>--><!--        </div>--><div class="layui-form-item layui-inline"><label class="layui-form-label">项目</label><div class="layui-input-inline"><select class="layui-select" name="p_name"><!--                    {foreach ['0'=>'bdcf','1'=>'500out','2'=>'v8','3'=>'v9'] as $k=>$v}--><?php foreach(['0'=>'bdcf','1'=>'500out'] as $k=>$v): if(app('request')->get('status') == $k.""): ?><option selected value="<?php echo htmlentities($k); ?>"><?php echo htmlentities($v); ?></option><?php else: ?><option value="<?php echo htmlentities($k); ?>"><?php echo htmlentities($v); ?></option><?php endif; ?><?php endforeach; ?></select></div></div><div class="layui-form-item"><label class="layui-form-label">项目名称<br><span class="nowrap color-desc"></span></label><div class="layui-input-block"><input name="project_name" required placeholder="请输入项目名称（必填）" value="<?php echo sysconf('project_name'); ?>" class="layui-input"><p class="help-block">打包人员定义的项目名称，作为查找项目索引之一。</p></div></div><!--        <div class="layui-form-item">--><!--            <label class="layui-form-label">项目编号<br><span class="nowrap color-desc"></span></label>--><!--            <div class="layui-input-block">--><!--                <input name="project_id" required placeholder="请输入项目编号（必填）" value="<?php echo sysconf('project_id'); ?>" class="layui-input">--><!--                <p class="help-block">对应公司项目编号，作为查找项目索引之一。</p>--><!--            </div>--><!--        </div>--><!--        <div class="layui-form-item">--><!--            <label class="layui-form-label">项目编号<br><span class="nowrap color-desc"></span></label>--><!--            <div class="layui-input-block">--><!--                <input name="project_id" required placeholder="请输入项目编号（必填）" value="<?php echo sysconf('project_id'); ?>" class="layui-input">--><!--                <p class="help-block">对应公司项目编号，作为查找项目索引之一。</p>--><!--            </div>--><!--        </div>--><div class="layui-form-item"><label class="layui-form-label">包ID<br><span class="nowrap color-desc"></span></label><div class="layui-input-block"><input name="bundle_id" required placeholder="请输入BUNDLEID（必填）" value="<?php echo sysconf('bundle_id'); ?>" class="layui-input"><p class="help-block">项目Bundle indentifier。</p></div></div><div class="layui-form-item"><label class="layui-form-label">描述文件名<br><span class="nowrap color-desc"></span></label><div class="layui-input-block"><input name="specifier" required placeholder="请输入描述文件名（必填）" value="<?php echo sysconf('specifier'); ?>" class="layui-input"><p class="help-block">描述文件名。</p></div></div><div class="layui-form-item"><label class="layui-form-label">P12证书密码<br><span class="nowrap color-desc"></span></label><div class="layui-input-block"><input name="p12_pwd" required placeholder="请输入p12证书密码（必填）" value="<?php echo sysconf('p12_pwd'); ?>" class="layui-input"><p class="help-block">p12证书对应的密码。</p></div></div><!--        <div class="layui-form-item">--><!--            <label class="layui-form-label">工程Target<br><span class="nowrap color-desc"></span></label>--><!--            <div class="layui-input-block">--><!--                <input name="target" required placeholder="请输入工程Target（必填）" value="<?php echo sysconf('target'); ?>" class="layui-input">--><!--                <p class="help-block">工程Target，可以在终端cd进入工程根目录，输入'xcodebuild -list' 获取。</p>--><!--            </div>--><!--        </div>--><!--        <div class="layui-form-item">--><!--            <label class="layui-form-label">工程名称<br><span class="nowrap color-desc"></span></label>--><!--            <div class="layui-input-block">--><!--                <input name="name" placeholder="请输入工程名称（必填）" maxlength="32" required value="<?php echo sysconf('name'); ?>" class="layui-input">--><!--                <p class="help-block">项目的工程名称。</p>--><!--            </div>--><!--        </div>--><!--        <div class="layui-form-item">--><!--            <label class="layui-form-label">工程Scheme<br><span class="nowrap color-desc"></span></label>--><!--            <div class="layui-input-block">--><!--                <input name="scheme" placeholder="请输入工程Scheme（必填）" maxlength="32" required value="<?php echo sysconf('scheme'); ?>" class="layui-input">--><!--                <p class="help-block">项目的工程Scheme。</p>--><!--            </div>--><!--        </div>--><!--        <div class="layui-form-item">--><!--            <label class="layui-form-label">DEMO_APP_ID<br><span class="nowrap color-desc"></span></label>--><!--            <div class="layui-input-block">--><!--                <input name="demo_app_id" placeholder="请输入DEMO_APP_ID（必填）" maxlength="32" required value="<?php echo sysconf('demo_app_id'); ?>" class="layui-input">--><!--                <p class="help-block">DEMO_APP_ID。</p>--><!--            </div>--><!--        </div>--><!--        <div class="layui-form-item">--><!--            <label class="layui-form-label">SDK_APP_ID<br><span class="nowrap color-desc"></span></label>--><!--            <div class="layui-input-block">--><!--                <input name="sdk_app_id" placeholder="请输入SDK_APP_ID（必填）" maxlength="32" required value="<?php echo sysconf('sdk_app_id'); ?>" class="layui-input">--><!--                <p class="help-block">SDK_APP_ID。</p>--><!--            </div>--><!--        </div>--><!--        <div class="layui-form-item">--><!--            <label class="layui-form-label">SDK_MAINURL<br><span class="nowrap color-desc"></span></label>--><!--            <div class="layui-input-block">--><!--                <input name="sdk_mainurl" placeholder="请输入SDK_MAINURL（必填）" maxlength="32" required value="<?php echo sysconf('sdk_mainurl'); ?>" class="layui-input">--><!--                <p class="help-block">SDK_MAINURL。</p>--><!--            </div>--><!--        </div>--><!--        <div class="layui-form-item">--><!--            <label class="layui-form-label">PUBLIC_KEY<br><span class="nowrap color-desc"></span></label>--><!--            <div class="layui-input-block">--><!--                <input name="public_key" placeholder="请输入PUBLIC_KEY（必填）" maxlength="32" required value="<?php echo sysconf('public_key'); ?>" class="layui-input">--><!--                <p class="help-block">PUBLIC_KEY。</p>--><!--            </div>--><!--        </div>--><!--        <div class="layui-form-item">--><!--            <label class="layui-form-label">PL_CHANNLE<br><span class="nowrap color-desc"></span></label>--><!--            <div class="layui-input-block">--><!--                <input name="pl_channle" placeholder="请输入PL_CHANNLE（必填）" maxlength="32" required value="<?php echo sysconf('pl_channle'); ?>" class="layui-input">--><!--                <p class="help-block">PL_CHANNLE。</p>--><!--            </div>--><!--        </div>--><label class="layui-form-label">打包类型<br><span class="nowrap color-desc"></span></label><div class="layui-input-block"><?php foreach(['appstore'=>'appstore','ad hoc'=>'ad hoc'] as $k=>$v): ?><input type="radio" data-pem-type="<?php echo htmlentities($k); ?>" name="build_type" value="<?php echo htmlentities($k); ?>" title="<?php echo htmlentities($v); ?>" lay-filter="data-mch-type"><?php endforeach; ?><p class="help-block">请选择打包类型，appstore 和 ad hoc 二选一！</p></div><!--        <label class="layui-form-label">编译类型<br><span class="nowrap color-desc"></span></label>--><!--        <div class="layui-input-block">--><!--            <?php foreach(['xcodeproj'=>'xcodeproj','xcworkspace'=>'xcworkspace'] as $k=>$v): ?>--><!--            <input type="radio" data-pem-type="<?php echo htmlentities($k); ?>" name="wechat_mch_ssl_type" value="<?php echo htmlentities($k); ?>" title="<?php echo htmlentities($v); ?>" lay-filter="data-mch-type">--><!--            <?php endforeach; ?>--><!--            <p class="help-block">请选择编译类型，xcodeproj 和 xcworkspace 二选一！</p>--><!--        </div>--><!--        <div class="hr-line-dashed"></div>--><!--        &lt;!&ndash; eigo 这里之前是上传证书--><div class="layui-form-item"><label class="layui-form-label">相关证书<br><span class="nowrap color-desc"></span></label><div class="layui-input-block"><?php foreach(['pem'=>'点击上传'] as $k=>$v): ?><input type="radio" data-pem-type="<?php echo htmlentities($k); ?>" name="wechat_mch_ssl_type" value="<?php echo htmlentities($k); ?>" title="<?php echo htmlentities($v); ?>" lay-filter="data-mch-type"><?php endforeach; ?><p class="help-block">请上传证书，P12 和 mobileprovision！</p><div data-mch-type="p12" class="layui-tab-item padding-top-15 padding-bottom-15"><input name="wechat_mch_ssl_p12" value="<?php echo htmlentities((isset($wechat_mch_ssl_p12) && ($wechat_mch_ssl_p12 !== '')?$wechat_mch_ssl_p12:'')); ?>" type="hidden"><!--                    <button data-file="btn" data-uptype="local" data-safe="true" data-type="p12" data-field="wechat_mch_ssl_p12" type="button" class="layui-btn layui-btn-primary">--><!--                        <i class="layui-icon layui-icon-vercode font-s14"></i> 上传 P12 证书--><!--                    </button>--><p class="help-block margin-top-10"></p></div><div data-mch-type="pem" class="layui-tab-item padding-top-15 padding-bottom-15"><input name="wechat_mch_ssl_key" value="<?php echo htmlentities((isset($wechat_mch_ssl_key) && ($wechat_mch_ssl_key !== '')?$wechat_mch_ssl_key:'')); ?>" type="hidden"><button data-file="btn" data-uptype="local" data-safe="true" data-type="p12" data-field="wechat_mch_ssl_key" type="button" class="layui-btn layui-btn-primary margin-right-5"><i class="layui-icon layui-icon-vercode font-s14"></i> 上传 p12 证书
                    </button><input name="wechat_mch_ssl_cer" value="<?php echo htmlentities((isset($wechat_mch_ssl_cer) && ($wechat_mch_ssl_cer !== '')?$wechat_mch_ssl_cer:'')); ?>" type="hidden"><button data-file="btn" data-uptype="local" data-safe="true" data-type="mobileprovision" data-field="wechat_mch_ssl_cer" type="button" class="layui-btn layui-btn-primary"><i class="layui-icon layui-icon-vercode font-s14"></i> 上传 cer 证书
                    </button><p class="help-block margin-top-10">.p12：使设备不需要在苹果开发者网站重新申请开发和发布证书，就能使用；mobileprovision证书：.mobileprovision文件格式的配置文件是让开发者的项目（APP）能有真机调试，发布的权限。</p></div></div></div><div class="hr-line-dashed"></div><div class="layui-form-item text-center"><button class="layui-btn" type="submit">保存配置</button></div><!--        <div class="layui-form-item ">--><!--            <label class="layui-form-label"></label>--><!--            <div class="layui-input-block text-center" style="max-width:300px">--><!--                <button class="layui-btn" type="submit">开始打包</button>--><!--            </div>--><!--        </div>--></div></form></div><script>
    (function () {

        form.render();
        this.type = "<?php echo sysconf('wechat_mch_ssl_type'); ?>" || 'p12';
        form.val('build', {wechat_mch_ssl_type: this.type});
        form.on('radio(data-mch-type)', function (data) {
            apply(data.value);
        });
        apply.call(this, this.type);

        function apply(type) {
            $('[data-mch-type="' + type + '"]').show().siblings('[data-mch-type]').hide();
        };
        // 证书文件上传控制
        this.types = ['wechat_mch_ssl_p12', 'wechat_mch_ssl_key', 'wechat_mch_ssl_cer'];
        for (var i in this.types) $('input[name="' + this.types[i] + '"]').on('change', function () {
            var input = this, $button = $(this).next('button');
            setTimeout(function () {
                if (typeof input.value === 'string' && input.value.length > 5) {
                    $button.find('i').addClass('color-green layui-icon-vercode').removeClass('layui-icon-upload-drag');
                } else {
                    $button.find('i').removeClass('color-green layui-icon-vercode').addClass('layui-icon-upload-drag');
                }
            }, 300);
        }).trigger('change');

    })({});
</script></div>