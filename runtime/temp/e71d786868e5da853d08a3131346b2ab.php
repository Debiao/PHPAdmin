<?php /*a:7:{s:65:"/Users/sundebiao/PHPAdmin/application/admin/view/config/info.html";i:1564341490;s:58:"/Users/sundebiao/PHPAdmin/application/admin/view/main.html";i:1564341490;s:73:"/Users/sundebiao/PHPAdmin/application/admin/view/config/info-website.html";i:1564341490;s:73:"/Users/sundebiao/PHPAdmin/application/admin/view/config/info-storage.html";i:1564341490;s:77:"/Users/sundebiao/PHPAdmin/application/admin/view/config/info-storage-oss.html";i:1564341490;s:79:"/Users/sundebiao/PHPAdmin/application/admin/view/config/info-storage-local.html";i:1564341490;s:79:"/Users/sundebiao/PHPAdmin/application/admin/view/config/info-storage-qiniu.html";i:1564341490;}*/ ?>
<div class="layui-card layui-bg-gray"><?php if(!(empty($title) || (($title instanceof \think\Collection || $title instanceof \think\Paginator ) && $title->isEmpty()))): ?><div class="layui-card-header layui-anim layui-anim-fadein notselect"><span class="layui-icon layui-icon-next font-s10 color-desc margin-right-5"></span><?php echo htmlentities((isset($title) && ($title !== '')?$title:'')); ?><div class="pull-right"></div></div><?php endif; ?><div class="layui-card-body layui-anim layui-anim-upbit"><div class="layui-tab layui-tab-card think-bg-white"><ul class="layui-tab-title notselect"><li data-type='website'>网站参数设置</li><li data-type="storage">文件存储配置</li></ul><div class="layui-tab-content"><div class="layui-tab-item"><form onsubmit="return false;" data-auto="true" action="<?php echo url('save'); ?>" method="post" class='layui-form layui-card' autocomplete="off"><div class="layui-card-body"><div class="padding-right-40 padding-bottom-10 margin-top-20"><div class="layui-form-item"><label class="layui-form-label">Name<br><span class="nowrap color-desc">程序名称</span></label><div class="layui-input-block"><input name="app_name" required placeholder="请输入程序名称" value="<?php echo sysconf('app_name'); ?>" class="layui-input"><p class="help-block">当前程序名称，在后台主标题上显示 <?php echo sysconf('app_name'); ?></p></div></div><div class="layui-form-item"><label class="layui-form-label">Version<br><span class="nowrap color-desc">程序版本</span></label><div class="layui-input-block"><input name="app_version" placeholder="请输入程序版本" value="<?php echo sysconf('app_version'); ?>" class="layui-input"><p class="help-block">当前程序版本号，在后台主标题上标显示版本 <?php echo sysconf('app_version'); ?></p></div></div><div class="layui-form-item"><label class="layui-form-label">Website<br><span class="nowrap color-desc">网站名称</span></label><div class="layui-input-block"><input name="site_name" required placeholder="请输入网站名称" value="<?php echo sysconf('site_name'); ?>" class="layui-input"><p class="help-block">网站名称，将在浏览器的标签上显示 <?php echo sysconf('site_name'); ?></p></div></div><div class="layui-form-item"><label class="layui-form-label">Browser<br><span class="nowrap color-desc">浏览器图标</span></label><div class="layui-input-block"><img alt="icon" data-tips-image style="height:auto;max-height:32px;min-width:32px" src="<?php echo sysconf('site_icon'); ?>"/><input type="hidden" name="site_icon" onchange="$(this).prev('img').attr('src', this.value)" value="<?php echo sysconf('site_icon'); ?>" class="layui-input"><a class="margin-left-10" data-file="btn" data-type="ico,png" data-field="site_icon">上传图片</a><p class="help-block">建议上传 ICO 图标的尺寸为 128x128px，此图标用于网站标题前，<a href="http://www.favicon-icon-generator.com/" target="_blank">ICON在线制作</a></p></div></div><div class="layui-form-item"><label class="layui-form-label">Copyright<br><span class="nowrap color-desc">版权信息</span></label><div class="layui-input-block"><input name="site_copy" required placeholder="请输入版权信息" value="<?php echo sysconf('site_copy'); ?>" class="layui-input"><p class="help-block">程序的版权信息设置，在后台登录页面显示版本信息</p></div></div><div class="layui-form-item"><label class="layui-form-label">Miitbeian<br><span class="nowrap color-desc">网站备案号</span></label><div class="layui-input-block"><input name="miitbeian" placeholder="请输入网站备案号" value="<?php echo sysconf('miitbeian'); ?>" class="layui-input"><p class="help-block">网站备案号，可以在<a target="_blank" href="http://www.miitbeian.gov.cn">备案管理中心</a>查询获取，将在登录页面下面显示</p></div></div><div class="hr-line-dashed margin-left-40"></div><div class="layui-form-item text-center padding-bottom-10"><button class="layui-btn" type="submit">保存配置</button></div></div></div></form></div><div class="layui-tab-item"><div class="layui-card layui-form"><div class="layui-card-body"><div class="layui-form-item padding-top-20"><label class="layui-form-label">Storage<br><span class="nowrap color-desc">存储类型</span></label><div class="layui-input-block"><?php foreach(['local'=>'本地服务器存储','qiniu'=>'七牛云对象存储','oss'=>'阿里云OSS存储'] as $k=>$v): ?><input type="radio" data-storagetype="<?php echo htmlentities($k); ?>" name="storage_type" value="<?php echo htmlentities($k); ?>" title="<?php echo htmlentities($v); ?>" lay-filter="storage_type"><?php endforeach; ?><p class="help-block">请选择文件存储类型，其它云储存需要配置正确的参数才可以上传文件哦！</p></div></div></div></div><div class="padding-bottom-10"><div data-type="oss"><form onsubmit="return false;" data-auto="true" action="<?php echo url('save'); ?>" method="post" class='layui-form layui-card' autocomplete="off"><div class="layui-card-body"><div class="padding-right-40"><div class="color-blue padding-left-40 padding-bottom-20">
                文件将上传到阿里云OSS空间，需要配置OSS公开访问及跨域策略（目前已实现自动创建空间及配置访问策略）。
            </div><div class="layui-form-item"><label class="layui-form-label">AllowExts<br><span class="nowrap color-desc">允许类型</span></label><div class="layui-input-block"><input type="text" name="storage_local_exts" required value="<?php echo sysconf('storage_local_exts'); ?>" placeholder="请输入系统文件上传后缀" class="layui-input"><p class="help-block">设置系统允许上传文件的后缀，多个以英文逗号隔开。如：png,jpg,rar,doc</p></div></div><div class="layui-form-item"><label class="layui-form-label label-required">Protocol<br><span class="nowrap color-desc">访问协议</span></label><div class="layui-input-block"><!--<?php foreach(['http','https','auto'] as $pro): ?>--><label class="think-radio"><!--<?php if(sysconf('storage_oss_is_https') == $pro): ?>--><input checked type="radio" name="storage_oss_is_https" value="<?php echo htmlentities($pro); ?>" lay-ignore><?php echo htmlentities($pro); ?><!--<?php else: ?>--><input type="radio" name="storage_oss_is_https" value="<?php echo htmlentities($pro); ?>" lay-ignore><?php echo htmlentities($pro); ?><!--<?php endif; ?>--></label><!--<?php endforeach; ?>--><p class="help-block">阿里云对象存储访问协议（http、https、auto），其中 https 需要配置证书才能使用，auto 为相对协议自动根据域名切换http与https。</p></div></div><div class="layui-form-item"><label class="layui-form-label">Bucket<br><span class="nowrap color-desc">空间名称</span></label><div class="layui-input-block"><input type="text" name="storage_oss_bucket" required value="<?php echo sysconf('storage_oss_bucket'); ?>" placeholder="请输入OSS Bucket (空间名称)" class="layui-input"><p class="help-block">填写OSS存储空间名称，如：think-admin-oss（需要是全区唯一的值，不存在时会自动创建）</p></div></div><div class="layui-form-item"><label class="layui-form-label">EndPoint<br><span class="nowrap color-desc">数据中心</span></label><div class="layui-input-block"><select required name="storage_oss_endpoint" class="layui-select" lay-search><?php foreach($ossPoints as $k=>$p): ?><!--<?php if(sysconf('storage_oss_endpoint') == $k): ?>--><option selected value="<?php echo htmlentities($k); ?>"><?php echo htmlentities($p); ?><span class="font-s10 color-desc">(<?php echo htmlentities($k); ?>)</span></option><!--<?php else: ?>--><option value="<?php echo htmlentities($k); ?>"><?php echo htmlentities($p); ?><span class="font-s10 color-desc">(<?php echo htmlentities($k); ?>)</span></option><!--<?php endif; ?>--><?php endforeach; ?></select><p class="help-block">请选择OSS数据中心访问节点，有效值如：oss-cn-shenzhen.aliyuncs.com</p></div></div><div class="layui-form-item"><label class="layui-form-label">AccessKey<br><span class="nowrap color-desc">访问密钥</span></label><div class="layui-input-block"><input type="text" name="storage_oss_keyid" required value="<?php echo sysconf('storage_oss_keyid'); ?>" maxlength="16" placeholder="请输入OSS AccessKey (访问密钥)" class="layui-input"><p class="help-block">可以在 [ 阿里云 > 个人中心 ] 设置并获取到访问密钥。</p></div></div><div class="layui-form-item"><label class="layui-form-label">SecretKey<br><span class="nowrap color-desc">安全密钥</span></label><div class="layui-input-block"><input type="text" name="storage_oss_secret" required value="<?php echo sysconf('storage_oss_secret'); ?>" maxlength="30" placeholder="请输入OSS SecretKey (安全密钥)" class="layui-input"><p class="help-block">可以在 [ 阿里云 > 个人中心 ] 设置并获取到安全密钥。</p></div></div><div class="layui-form-item"><label class="layui-form-label">Domain<br><span class="nowrap color-desc">访问域名</span></label><div class="layui-input-block"><input type="text" name="storage_oss_domain" value="<?php echo sysconf('storage_oss_domain'); ?>" placeholder="请输入OSS存储 Domain (访问域名)" class="layui-input"><p class="help-block">填写OSS存储外部访问域名，如：think-admin-oss.oss-cn-shenzhen.aliyuncs.com（正常情况下是自动获取的）</p></div></div><div class="hr-line-dashed margin-left-40"></div><div class="layui-form-item text-center"><input type="hidden" name="storage_type" value="oss"><button class="layui-btn" type="submit">保存配置</button></div></div></div></form></div><div data-type="local"><form onsubmit="return false;" data-auto="true" action="<?php echo url('save'); ?>" method="post" class='layui-form layui-card' autocomplete="off"><div class="layui-card-body"><div class="padding-right-40"><div class="color-blue padding-left-40 padding-bottom-20">
                文件将存储在本地服务器，需确保服务器的 public/upload 目录有写入权限，有足够的存储空间。
            </div><div class="layui-form-item"><label class="layui-form-label">AllowExts<br><span class="nowrap color-desc">允许类型</span></label><div class="layui-input-block"><input type="text" name="storage_local_exts" required value="<?php echo sysconf('storage_local_exts'); ?>" placeholder="请输入系统文件上传后缀" class="layui-input"><p class="help-block">设置系统允许上传文件的后缀，多个以英文逗号隔开。如：png,jpg,rar,doc</p></div></div><div class="hr-line-dashed margin-left-40"></div><div class="layui-form-item text-center"><input type="hidden" name="storage_type" value="local"><button class="layui-btn" type="submit">保存配置</button></div></div></div></form></div><div data-type="qiniu"><form onsubmit="return false;" data-auto="true" action="<?php echo url('save'); ?>" method="post" class='layui-form layui-card' autocomplete="off"><div class="layui-card-body"><div class="padding-right-40"><div class="color-blue padding-left-40 padding-bottom-20">
                文件将上传到七牛云空间（<a target="_blank" href="https://portal.qiniu.com/signup?code=3lhz6nmnwbple">点击这里免费申请10G存储</a>），申请成功后添加公开bucket并配置接口密钥。
            </div><div class="layui-form-item"><label class="layui-form-label">AllowExts<br><span class="nowrap color-desc">允许类型</span></label><div class="layui-input-block"><input type="text" name="storage_local_exts" required value="<?php echo sysconf('storage_local_exts'); ?>" placeholder="请输入系统文件上传后缀" class="layui-input"><p class="help-block">设置系统允许上传文件的后缀，多个以英文逗号隔开。如：png,jpg,rar,doc</p></div></div><div class="layui-form-item" data-storage-type="qiniu"><label class="layui-form-label label-required">Protocol<br><span class="nowrap color-desc">访问协议</span></label><div class="layui-input-block"><!--<?php foreach(['http','https','auto'] as $pro): ?>--><label class="think-radio"><!--<?php if(sysconf('storage_qiniu_is_https') == $pro): ?>--><input checked type="radio" name="storage_qiniu_is_https" value="<?php echo htmlentities($pro); ?>" lay-ignore><?php echo htmlentities($pro); ?><!--<?php else: ?>--><input type="radio" name="storage_qiniu_is_https" value="<?php echo htmlentities($pro); ?>" lay-ignore><?php echo htmlentities($pro); ?><!--<?php endif; ?>--></label><!--<?php endforeach; ?>--><p class="help-block">七牛云存储访问协议（http、https、auto），其中 https 需要配置证书才能使用，auto 为相对协议自动根据域名切换http与https。</p></div></div><div class="layui-form-item" data-storage-type="qiniu"><label class="layui-form-label">Region<br><span class="nowrap color-desc label-required">存储区域</span></label><div class="layui-input-block"><?php foreach(['华东','华北','华南','北美'] as $area): ?><label class="think-radio"><!--<?php if(sysconf('storage_qiniu_region') == $area): ?>--><input checked type="radio" name="storage_qiniu_region" value="<?php echo htmlentities($area); ?>" lay-ignore><!--<?php else: ?>--><input type="radio" name="storage_qiniu_region" value="<?php echo htmlentities($area); ?>" lay-ignore><!--<?php endif; ?>--><?php echo htmlentities($area); ?></label><?php endforeach; ?><p class="help-block">七牛云存储空间所在区域，需要严格对应储存所在区域才能上传文件。</p></div></div><div class="layui-form-item" data-storage-type="qiniu"><label class="layui-form-label">Bucket<br><span class="nowrap color-desc">空间名称</span></label><div class="layui-input-block"><input type="text" name="storage_qiniu_bucket" required value="<?php echo sysconf('storage_qiniu_bucket'); ?>" placeholder="请输入七牛云存储 Bucket (空间名称)" class="layui-input"><p class="help-block">填写七牛云存储空间名称，如：static</p></div></div><div class="layui-form-item" data-storage-type="qiniu"><label class="layui-form-label">Domain<br><span class="nowrap color-desc">访问域名</span></label><div class="layui-input-block"><input type="text" name="storage_qiniu_domain" required value="<?php echo sysconf('storage_qiniu_domain'); ?>" placeholder="请输入七牛云存储 Domain (访问域名)" class="layui-input"><p class="help-block">填写七牛云存储访问域名，如：static.ctolog.cc</p></div></div><div class="layui-form-item" data-storage-type="qiniu"><label class="layui-form-label">AccessKey<br><span class="nowrap color-desc">访问密钥</span></label><div class="layui-input-block"><input type="text" name="storage_qiniu_access_key" required value="<?php echo sysconf('storage_qiniu_access_key'); ?>" placeholder="请输入七牛云 AccessKey (访问密钥)" class="layui-input"><p class="help-block">可以在 [ 七牛云 > 个人中心 ] 设置并获取到访问密钥。</p></div></div><div class="layui-form-item" data-storage-type="qiniu"><label class="layui-form-label">SecretKey<br><span class="nowrap color-desc">安全密钥</span></label><div class="layui-input-block"><input type="text" name="storage_qiniu_secret_key" required value="<?php echo sysconf('storage_qiniu_secret_key'); ?>" maxlength="43" placeholder="请输入七牛云 SecretKey (安全密钥)" class="layui-input"><p class="help-block">可以在 [ 七牛云 > 个人中心 ] 设置并获取到安全密钥。</p></div></div><div class="hr-line-dashed margin-left-40"></div><div class="layui-form-item text-center"><input type="hidden" name="storage_type" value="qiniu"><button class="layui-btn" type="submit">保存配置</button></div></div></div></form></div></div><script>
    apply('<?php echo sysconf("storage_type"); ?>');
    form.render().on('radio(storage_type)', function (data) {
        apply(data.value);
    });

    function apply(value) {
        this.$active = $("[data-storagetype='" + value + "']").trigger('click');
        if (this.$active.size() < 1) $("[data-storagetype]:first").trigger('click');
        $('[data-type="' + value + '"]').show().siblings('[data-type]').hide();
    }
</script></div></div></div><script>
    (function (storage) {
        (function (type, $default, $checked) {
            $default = $('.layui-tab ul.layui-tab-title li:first');
            $checked = $('.layui-tab ul.layui-tab-title li[data-type="' + type + '"]');
            ($checked.length > 0 ? $checked : $default).trigger('click');
        })(layui.data(storage)['type'] || '');
        $('.layui-tab ul.layui-tab-title li[data-type]').on('click', function () {
            layui.data(storage, {key: 'type', value: this.getAttribute('data-type')});
        });
    })('website-config-type');
</script></div></div>